---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug";

const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const last_posts = posts.slice(0, 3);
---

<BaseLayout sideBarActiveItemID="home">
  <div class="pb-12 mt-5">
    <div class="text-3xl py-3 font-bold text-center">Welcome to My Digital Universe</div>
    <div
      class="mx-4 mt-2 mb-3 h-px bg-[linear-gradient(to_right,transparent,rgba(0,0,0,0.45),transparent)] dark:bg-[linear-gradient(to_right,transparent,rgba(255,255,255,0.35),transparent)]"
    >
      <div
        class="h-full w-full bg-[linear-gradient(to_right,rgba(255,255,255,0),rgba(255,255,255,0.5),rgba(255,255,255,0))]"
      >
      </div>
    </div>
    <div class="py-2">
      <text class="text-lg">
        You can browse my past works and get information about me and my knowledge. Feel free to contact for anything
        and to look up the sky, because <i>the only ones who fly are the ones who dare to fly</i>
      </text>
    </div>
    <img
      src="/silhouette-white.png"
      alt="Source: Ace Combat 7 Skies Unknown"
      title="Source: Ace Combat 7 Skies Unknown"
      style="max-width: 90%;"
    />
    <br />
  </div>

  <div>
    <div class="text-3xl w-full font-bold mb-2">Open Source Projects</div>
    <div
      class="mt-2 mb-3 h-px bg-[linear-gradient(to_right,rgba(0,0,0,0.45),transparent)] dark:bg-[linear-gradient(to_right,rgba(255,255,255,0.35),transparent)]"
    >
    </div>
  </div>

  <HorizontalCard
    title="Repo Initializer"
    img="https://github.com/egecetin/Repo-Init/raw/master/doc/logo.png"
    desc="Modern C++ project template with enterprise-grade integrations"
    url="https://github.com/egecetin/Repo-Init"
    badge="C++"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="PcapPlusPlus"
    img="https://pcapplusplus.github.io/img/logo/logo_color.png"
    desc="Colloborator at a high-performance network packet processing library"
    url="https://pcapplusplus.github.io/"
    badge="C++"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="LibKaleidoscope"
    img="https://github.com/egecetin/libKaleidoscope/raw/master/doc/images/logo-white.png"
    desc="High-performance kaleidoscope effects for real-time applications"
    url="https://github.com/egecetin/libKaleidoscope"
    badge="C, CUDA"
  />

  <div>
    <div class="text-3xl w-full font-bold mb-5 mt-10">Latest news</div>
    <div
      class="mt-2 mb-3 h-px bg-[linear-gradient(to_right,rgba(0,0,0,0.45),transparent)] dark:bg-[linear-gradient(to_right,rgba(255,255,255,0.35),transparent)]"
    >
    </div>
  </div>

  {
    last_posts.map((post) => (
      <>
        <HorizontalCard
          title={post.data.title}
          img={post.data.heroImage}
          desc={post.data.description}
          url={"/blog/" + createSlug(post.data.title, post.slug)}
          target="_self"
          badge={post.data.badge}
        />
        <div class="divider my-0" />
      </>
    ))
  }
</BaseLayout>
